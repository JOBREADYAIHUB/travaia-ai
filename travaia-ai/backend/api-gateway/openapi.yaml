swagger: "2.0"
info:
  title: Travaia API Gateway
  description: API Gateway for Travaia microservices
  version: "1.0.0"

host: travaia-managed-cggfdfie.uc.gateway.dev
basePath: /
schemes:
  - https

produces:
  - application/json

securityDefinitions:
  api_key:
    type: "apiKey"
    name: "key"
    in: "query"
  firebase:
    authorizationUrl: ""
    flow: "implicit"
    type: "oauth2"
    x-google-issuer: "https://securetoken.google.com/travaia-e1310"
    x-google-jwks_uri: "https://www.googleapis.com/service_accounts/v1/metadata/x509/securetoken@system.gserviceaccount.com"
    x-google-audiences: "travaia-e1310"

x-google-endpoints:
  - name: travaia-managed-cggfdfie.uc.gateway.dev
    allowCors: true

x-google-management:
  metrics:
    - name: "requestCount"
      displayName: "Request Count"
      valueType: INT64
      metricKind: DELTA
  quota:
    limits:
      - name: "RequestsPerMinutePerProject"
        metric: "requestCount"
        unit: "1/min/{project}"
        values:
          STANDARD: 1000

paths:
  /docs:
    get:
      summary: Get API documentation
      operationId: get_docs
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /openapi.json:
    get:
      summary: Get OpenAPI specification
      operationId: get_openapi_spec
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /list-apps:
    get:
      summary: List Apps
      operationId: list_apps
      security:
        - firebase: []
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/users/{user_id}/sessions/{session_id}:
    get:
      summary: Get Session
      operationId: get_session
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
        - name: session_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
    post:
      summary: Create Session With Id
      operationId: create_session_with_id
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
        - name: session_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
    delete:
      summary: Delete Session
      operationId: delete_session
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
        - name: session_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/users/{user_id}/sessions:
    get:
      summary: List Sessions
      operationId: list_sessions
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
    post:
      summary: Create Session
      operationId: create_session
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/users/{user_id}/sessions/{session_id}/artifacts/{artifact_name}:
    get:
      summary: Load Artifact
      operationId: load_artifact
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
        - name: session_id
          in: path
          required: true
          type: string
        - name: artifact_name
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
    delete:
      summary: Delete Artifact
      operationId: delete_artifact
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
        - name: session_id
          in: path
          required: true
          type: string
        - name: artifact_name
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/users/{user_id}/sessions/{session_id}/artifacts/{artifact_name}/versions/{version_id}:
    get:
      summary: Load Artifact Version
      operationId: load_artifact_version
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
        - name: session_id
          in: path
          required: true
          type: string
        - name: artifact_name
          in: path
          required: true
          type: string
        - name: version_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/users/{user_id}/sessions/{session_id}/artifacts:
    get:
      summary: List Artifact Names
      operationId: list_artifact_names
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
        - name: session_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/users/{user_id}/sessions/{session_id}/artifacts/{artifact_name}/versions:
    get:
      summary: List Artifact Versions
      operationId: list_artifact_versions
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
        - name: session_id
          in: path
          required: true
          type: string
        - name: artifact_name
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /run:
    post:
      summary: Agent Run
      operationId: agent_run
      security:
        - firebase: []
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /run_sse:
    post:
      summary: Agent Run Sse
      operationId: agent_run_sse
      security:
        - firebase: []
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /:
    get:
      summary: Redirect Root To Dev Ui
      operationId: redirect_root_to_dev_ui
      security:
        - firebase: []
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /dev-ui:
    get:
      summary: Redirect Dev Ui Add Slash
      operationId: redirect_dev_ui_add_slash
      security:
        - firebase: []
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /builder/save:
    post:
      summary: Builder Build
      operationId: builder_build
      security:
        - firebase: []
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /builder/app/{app_name}:
    get:
      summary: Get Agent Builder
      operationId: get_agent_builder
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /feedback:
    post:
      summary: Collect Feedback
      operationId: collect_feedback
      security:
        - firebase: []
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /debug/trace/{event_id}:
    get:
      summary: Get Trace Dict
      operationId: get_trace_dict
      security:
        - firebase: []
      parameters:
        - name: event_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /debug/trace/session/{session_id}:
    get:
      summary: Get Trace For Session
      operationId: get_trace_for_session
      security:
        - firebase: []
      parameters:
        - name: session_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/users/{user_id}/sessions/{session_id}/events/{event_id}/graph:
    get:
      summary: Get Graph For Event
      operationId: get_graph_for_event
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: user_id
          in: path
          required: true
          type: string
        - name: session_id
          in: path
          required: true
          type: string
        - name: event_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/eval_sets/{eval_set_id}:
    post:
      summary: Create Eval Set
      operationId: create_eval_set
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: eval_set_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/eval_sets:
    get:
      summary: List Eval Sets
      operationId: list_eval_sets
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/eval_sets/{eval_set_id}/add_session:
    post:
      summary: Add Session To Eval Set
      operationId: add_session_to_eval_set
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: eval_set_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/eval_sets/{eval_set_id}/evals:
    get:
      summary: List Eval Cases
      operationId: list_eval_cases
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: eval_set_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/eval_sets/{eval_set_id}/evals/{eval_case_id}:
    get:
      summary: Get Eval Case
      operationId: get_eval_case
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: eval_set_id
          in: path
          required: true
          type: string
        - name: eval_case_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
    put:
      summary: Update Eval Case
      operationId: update_eval_case
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: eval_set_id
          in: path
          required: true
          type: string
        - name: eval_case_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
    delete:
      summary: Delete Eval Case
      operationId: delete_eval_case
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: eval_set_id
          in: path
          required: true
          type: string
        - name: eval_case_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/eval_sets/{eval_set_id}/run_eval:
    post:
      summary: Run Eval
      operationId: run_eval
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: eval_set_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/eval_results/{eval_result_id}:
    get:
      summary: Get Eval Result
      operationId: get_eval_result
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
        - name: eval_result_id
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/eval_results:
    get:
      summary: List Eval Results
      operationId: list_eval_results
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /apps/{app_name}/eval_metrics:
    get:
      summary: Get Eval Metrics
      operationId: get_eval_metrics
      security:
        - firebase: []
      parameters:
        - name: app_name
          in: path
          required: true
          type: string
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-ai-976191766214.us-central1.run.app
        jwt_audience: https://travaia-ai-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
  /applications:
    post:
      summary: Proxy POST requests to Application & Job Service
      operationId: applications_post
      security:
        - firebase: []
      x-google-backend:
        path_translation: APPEND_PATH_TO_ADDRESS
        address: https://travaia-application-job-service-976191766214.us-central1.run.app
        jwt_audience: https://travaia-application-job-service-976191766214.us-central1.run.app
      responses:
        '200':
          description: Success
        '400':
          description: Bad Request
        '401':
          description: Unauthorized
        '500':
          description: Internal Server Error